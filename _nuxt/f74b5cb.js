(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{332:function(t,e,r){},337:function(t,e,r){"use strict";var n={props:["weight"],data:function(){return{weights:[100,200,300,500,1e3]}},methods:{setActive:function(t){this.$emit("changeWeight",t)}}},o=(r(340),r(77)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"weights"},t._l(t.weights,(function(e){return r("p",{key:e,staticClass:"weights__item",class:{"weights__item--active":e===t.weight},on:{click:function(r){return r.preventDefault(),t.setActive(e)}}},[t._v("\n    "+t._s(e)+" г.\n  ")])})),0)}),[],!1,null,null,null);e.a=component.exports},338:function(t,e,r){"use strict";r(12),r(8),r(9),r(102),r(24),r(7),r(5),r(161);var n=r(3),o=r(88);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={components:{WeightSelect:r(337).a},data:function(){return{amount:1,amountRules:[function(t){return!!t||"Поле повиино бути заповнене"},function(t){return t>0||"Мінімальна кількість, дозволена для покупки - 1."}],weight:100}},computed:l(l({},Object(o.b)("cart",{cart:"getCart"})),{},{weights:function(){return Object.entries(this.item.price)},price:function(){return"gift-sets"===this.$route.params.name?"Від 200":this.item.price[this.weight]*Math.abs(this.amount)},countAvgStars:function(){return this.item.reviews.reduce((function(t,e){return t+e.rating}),0)/this.item.reviews.length},isExist:function(){return Boolean(this.cart.products.length||0)},isExistInCart:function(){var t=this;return!!this.cart&&this.cart.products.find((function(e){return e.productId===t.item.id}))}}),methods:{updateWeight:function(t){this.weight=t}}},v=r(77),component=Object(v.a)(d,void 0,void 0,!1,null,null,null);e.a=component.exports},340:function(t,e,r){"use strict";var n=r(332);r.n(n).a},370:function(t,e,r){},371:function(t,e,r){},416:function(t,e,r){"use strict";var n=r(370);r.n(n).a},417:function(t,e,r){"use strict";var n=r(371);r.n(n).a},444:function(t,e,r){"use strict";r.r(e);r(12),r(8),r(7),r(5),r(9),r(24);var n=r(3),o=(r(44),r(6)),c=r(88),l=r(412),d=r(338),v=r(56),_=r(151),m=r(16),f={computed:{currentUser:function(){return this.$store.getters["auth/getUser"]}},methods:{addVote:function(t,e){var r=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,c,l,d,_,f,h,w,y;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.currentUser.loggedIn){n.next=3;break}return r.$router.push("/authentication"),n.abrupt("return");case 3:return o=t,c=r.currentUser.data.email,l="".concat(o,"_").concat(c),n.next=8,m.b.collection("votes").doc(l);case 8:return d=n.sent,n.next=11,d.get();case 11:return _=n.sent,n.next=14,m.b.collection("deals").doc(t);case 14:return f=n.sent,n.next=17,f.get();case 17:h=n.sent,w=h.data(),y=0,void 0!==w.score&&(y=w.score),_.exists?(_.data().type!==e&&(d.update({type:e}),y+="upvote"===e?2:-2,f.update({score:y})),r.setScore(o,y)):(d.set({userId:c,dealId:o,type:e}),y+="upvote"===e?1:-1,f.update({votes:v.firestore.FieldValue.arrayUnion(d.id),score:y}),r.setScore(o,y));case 22:case"end":return n.stop()}}),n)})))()},setScore:function(t,e){Object(_.get)(this.$store.state.category,"deal")?this.$store.dispatch("category/UPDATE_SCORE",e):this.$store.dispatch("category/UPDATE_DEAL_SCORE",{dealId:t,score:e})}}},h=r(77),w=Object(h.a)(f,void 0,void 0,!1,null,null,null).exports,y=r(337),C={props:["review"],computed:{parsedDate:function(){var t=new Date(this.review.timestamp),e=new Date(t).getMonth()+1,dd=new Date(t).getDate();return[(dd>9?"":"0")+dd,(e>9?"":"0")+e,t.getFullYear()].join(".")}}},O=(r(416),r(101)),x=r.n(O),j=r(414),k=Object(h.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"review"},[r("div",{staticClass:"review__header"},[r("p",{staticClass:"review__username"},[t._v(t._s(t.review.userName))]),t._v(" "),r("p",{staticClass:"review__date"},[t._v(t._s(t.parsedDate))])]),t._v(" "),r("v-rating",{staticClass:"review__rating",attrs:{color:"secondary",value:t.review.rating}}),t._v(" "),r("p",{staticClass:"review__text"},[t._v(t._s(t.review.comment))])],1)}),[],!1,null,"2d900888",null),D=k.exports;function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}x()(k,{VRating:j.a});var R={components:{WeightSelect:y.a,Review:D},mixins:[d.a,w],asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params.id,e.next=3,t.store.dispatch("category/VIEW_ITEM",r);case 3:return e.abrupt("return",{itemId:r});case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{requiredRule:[function(t){return!!t||"Це поле повинно бути заповене"}],commentContent:null,additional:["Відгуки","Опис"],dialog:!1,rating:0,comment:"",displayName:"",email:"",reviews:[]}},computed:P(P(P({},Object(c.b)("auth",{user:"getUser",profile:"getProfile"})),Object(c.b)("category",{item:"getItem"})),{},{isAvailable:function(){return this.item.isAvailable?"Є в наявності":"Немає в наявності"},ending:function(){return this.item.reviews.length>1?"ВІДГУКИ":"ВІДГУК"}}),mounted:function(){this.initFields(),this.user.loggedIn&&(this.displayName=this.user.data.displayName,this.email=this.user.data.email)},beforeDestroy:function(){this.$store.dispatch("category/LEAVE_ITEM")},methods:{initFields:function(){var t=this.item.reviews.slice();this.reviews=t.sort((function(a,b){return b.timestamp-a.timestamp})),this.dialog=!1},postComment:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.review.validate()){e.next=6;break}return r=t.user.data.displayName,n={itemId:t.itemId,userName:r,rating:t.rating,comment:t.comment,timestamp:(new Date).getTime()},e.next=5,t.$store.dispatch("category/POST_COMMENT",n);case 5:t.initFields();case 6:case"end":return e.stop()}}),e)})))()},addToCart:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data={id:Object(l.a)(),productId:t.itemId,categoryName:t.$route.params.name,weight:t.weight,amount:t.amount},e.next=3,t.$store.dispatch("cart/ADD_CART_PRODUCT",data);case 3:case"end":return e.stop()}}),e)})))()}},head:function(){return{title:"NutsFamily - ".concat(this.item.name),meta:[{hid:"description",name:"description",content:"".concat(this.item.description.shortDetails)}]}}},V=(r(417),r(172)),I=r(352),S=r(450),T=r(451),$=r(436),A=r(437),N=r(438),U=r(439),F=r(440),W=r(376),M=r(152),B=r(360),J=r(373),L=r(441),H=r(42),Y=r(120),z=Object(h.a)(R,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-page"},[r("h1",{staticClass:"product-page__name"},[t._v(t._s(t.item.name))]),t._v(" "),r("div",{staticClass:"product-page__wrapper"},[r("v-carousel",{attrs:{cycle:"","hide-delimiter-background":"","show-arrows-on-hover":""}},t._l(t.item.image,(function(t,i){return r("v-carousel-item",{key:i},[r("img",{staticClass:"product-page__image",attrs:{src:t,alt:"product image"}})])})),1),t._v(" "),r("div",{staticClass:"product-page__info"},[r("h1",{staticClass:"product-page__name"},[t._v(t._s(t.item.name))]),t._v(" "),r("div",{staticClass:"product-page__numbers"},[r("div",{staticClass:"product-page__rating"},[r("v-rating",{staticClass:"product-page__stars",attrs:{readonly:"",color:"secondary",value:t.countAvgStars}}),t._v(" "),r("p",{staticClass:"product-page__reviews-link"},[t._v("\n            "+t._s(t.item.reviews.length)+" "+t._s(t.ending)+"\n          ")])],1),t._v(" "),r("div",{staticClass:"product-page__price-info"},[r("p",{staticClass:"product-page__price"},[t._v(t._s(t.price)+" грн.")]),t._v(" "),r("p",{staticClass:"product-page__available",class:{red:!t.item.isAvailable}},[t._v("\n            "+t._s(t.isAvailable)+"\n          ")])])]),t._v(" "),r("p",{staticClass:"product-page__short-description"},[t._v("\n        "+t._s(t.item.description.shortDetails)+"\n      ")]),t._v(" "),r("div",{staticClass:"product-page__select"},[r("p",{staticClass:"product-page__label label"},[t._v("Вага:")]),t._v(" "),r("WeightSelect",{attrs:{weight:t.weight},on:{changeWeight:t.updateWeight}})],1),t._v(" "),r("div",{staticClass:"product-page__actions"},[r("p",{staticClass:"product-page__label label"},[t._v("Кількість:")]),t._v(" "),r("v-text-field",{staticClass:"product-page__amount",attrs:{rules:t.amountRules,solo:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),t.isExistInCart?r("nuxt-link",{attrs:{to:"/cart"}},[t._v("Товар вже в кошику")]):r("v-btn",{staticClass:"product-page__buy",attrs:{color:"primary"},on:{click:t.addToCart}},[t._v("Купити")])],1)]),t._v(" "),r("div",{staticClass:"product-page__additional"},[r("v-expansion-panels",{attrs:{focusable:"",inset:""}},[r("v-expansion-panel",[r("v-expansion-panel-header",[t._v("\n            Опис\n          ")]),t._v(" "),r("v-expansion-panel-content",t._l(t.item.description.details,(function(e,i){return r("p",{key:i,staticClass:"mb-8"},[t._v("\n              "+t._s(e)+"\n            ")])})),0)],1),t._v(" "),r("v-expansion-panel",[r("v-expansion-panel-header",[t._v("\n            Відгуки\n          ")]),t._v(" "),r("v-expansion-panel-content",[r("v-row",{staticClass:"mt-3",attrs:{justify:"center"}},[t.user.loggedIn?r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"my-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),n),[t._v("\n                    Написати відгук\n                  ")])]}}],null,!1,715880338),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{staticClass:"pa-4"},[r("v-form",{attrs:{refs:"comments"}},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("mdi-close")])],1),t._v(" "),r("v-toolbar-title",[t._v("Написати відгук")])],1),t._v(" "),r("div",{staticClass:"product-page__input"},[r("p",{staticClass:"product-page__label label"},[t._v("Рейтинг:")]),t._v(" "),r("v-rating",{attrs:{rules:t.requiredRule},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}})],1),t._v(" "),r("div",{staticClass:"product-page__input"},[r("p",{staticClass:"product-page__label label"},[t._v("Коментар:")]),t._v(" "),r("v-textarea",{attrs:{rules:t.requiredRule},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),r("div",{staticClass:"product-page__input"},[r("p",{staticClass:"product-page__label label"},[t._v("\n                        Ваше ім'я та прізвище:\n                      ")]),t._v(" "),r("v-text-field",{attrs:{rules:t.requiredRule},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}})],1),t._v(" "),r("div",{staticClass:"product-page__input"},[r("p",{staticClass:"product-page__label label"},[t._v("\n                        Електронна пошта:\n                      ")]),t._v(" "),r("v-text-field",{attrs:{rules:t.requiredRule},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),r("v-btn",{on:{click:function(e){t.dialog=!1}}},[t._v("Скасувати")]),t._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:t.postComment}},[t._v("Залишити відгук")])],1)],1)],1):t._e()],1),t._v(" "),t._l(t.reviews,(function(t,i){return r("Review",{key:i,attrs:{review:t}})}))],2)],1)],1)],1)],1)])}),[],!1,null,null,null);e.default=z.exports;x()(z,{VBtn:V.a,VCard:I.a,VCarousel:S.a,VCarouselItem:T.a,VDialog:$.a,VExpansionPanel:A.a,VExpansionPanelContent:N.a,VExpansionPanelHeader:U.a,VExpansionPanels:F.a,VForm:W.a,VIcon:M.a,VRating:j.a,VRow:B.a,VTextField:J.a,VTextarea:L.a,VToolbar:H.a,VToolbarTitle:Y.b})}}]);